document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll(".dp-module-counter-root"),t=0;t<e.length;t++){var o=e[t];o.getAttribute("data-modal")&&o.addEventListener("click",function(e){if(e.target&&e.target.matches("a.dp-module-counter-link")){e.preventDefault();var t=new Url(this.getAttribute("href"));t.query.tmpl="component",DPCalendar.modal(t,0,700)}});var n=moment(o.getAttribute("data-date")),r=moment();if(n-r>0){o.querySelector(".dp-module-counter-ongoing").style.display="none";var d=function(e,t,o,n){var r=o.diff(n,e),d="";r>0?(d="MOD_DPCALENDAR_COUNTER_LABEL_"+e.toUpperCase(),r>1&&(d+="S"),t.querySelector(".dp-module-counter-"+e).classList.remove("dp-module-counter-empty-cell")):(r="",t.querySelector(".dp-module-counter-"+e).classList.add("dp-module-counter-empty-cell")),t.querySelector(".dp-module-counter-"+e+"-content").innerText=Joomla.JText._(d),t.querySelector(".dp-module-counter-"+e+"-number").innerText=r,n.add(r,e)};d("year",o,n,r),d("month",o,n,r),d("week",o,n,r),d("day",o,n,r),d("hour",o,n,r),d("minute",o,n,r),d("second",o,n,r),o.getAttribute("data-counting")&&setInterval(function(e){var t=moment(e.getAttribute("data-date")),o=moment();d("year",e,t,o),d("month",e,t,o),d("week",e,t,o),d("day",e,t,o),d("hour",e,t,o),d("minute",e,t,o),d("second",e,t,o)},1e3,o)}else o.querySelector(".dp-module-counter-container").style.display="none"}});